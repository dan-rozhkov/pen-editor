2026-02-13: stroke-align — Added strokeAlign property (inside/center/outside) to BaseNode.
  - UI: SelectInput on same row as Mode in StrokeSection
  - Konva: sceneFunc with clip/evenodd for inside/outside on rect, frame, ellipse, polygon, path
  - PixiJS: native alignment parameter (0/0.5/1) for unified strokes; per-side offset for per-side strokes
  - Tested in browser: UI renders, center/inside alignment visually verified on rect

2026-02-13: pixi-polygon-not-working — Fixed polygon not rendering in PixiJS backend.
  - Root cause: PixiJS drawController created polygon nodes with empty points array (points: [])
  - Fix: import generatePolygonPoints() and call it at creation time, matching Konva handler
  - Also aligned default fill color to #50b87d (was #cccccc)
  - Tested in browser: polygon renders correctly with fill and stroke in PixiJS, matches Konva output

2026-02-13: design-agent-chat-ui — Added floating Design Agent chat panel UI.
  - Types: ChatMessage, ToolCall, MessageRole, ToolCallStatus in src/types/chat.ts
  - Store: chatStore with messages, streaming state, tool call management
  - Components: ChatPanel, MessageList, ChatInput, SimpleMarkdown, ToolCallIndicator
  - SparkleIcon toggle button in bottom toolbar (PrimitivesPanel) with active highlight
  - Markdown: bold, inline code, fenced code blocks, bullet/ordered lists
  - Tool calls: collapsible indicator with spinner/check/x per status
  - Auto-resize textarea, Enter to send, Shift+Enter for newline
  - Tested in browser: messages render, shortcuts don't fire while typing, canvas click-through works

2026-02-13: design-agent-read-tools — Implemented 5 client-side tool handlers for Design Agent.
  - get_editor_state: returns roots, selection, reusable components, viewport state
  - batch_get: pattern search (type/name/reusable), nodeId lookup, readDepth/searchDepth, parentId scoping, resolveVariables
  - snapshot_layout: absolute position layout rects, maxDepth, problemsOnly (clipped detection)
  - get_variables: serializes all variables with theme values
  - get_screenshot: Konva toDataURL with pixelRatio:2, PixiJS extract.base64 fallback
  - All handlers registered in toolRegistry replacing stubs
  - Tested in browser: all tools verified with programmatic node creation, variable binding, reusable flag

2026-02-19: detach-component — Added "Detach Component" button for ref node instances.
  - Store: detachInstance() in instanceOperations.ts — resolves ref via resolveRefToFrame(), clones children with new IDs, flattens into store
  - UI: InstanceSection now rendered in PropertyEditor for ref nodes, with "Detach Component" button
  - History: saveHistory() called before mutation, undo fully restores ref node
  - Tested in browser: created component + instance, verified detach converts ref→frame, overrides preserved, children get new IDs, undo restores ref, original component unchanged

2026-02-20: auto-layout-multi-select — Show Auto Layout section in multi-select property editor.
  - AutoLayoutSection: added optional mixedKeys prop, isMixed helper for layout sub-properties (direction, gap, padding, alignment)
  - MultiSelectPropertyEditor: filters frames with autoLayout enabled, computes layout-specific mixed keys, routes updates only to auto-layout frames
  - Section shows when any selected node is a frame with auto-layout; hidden when none have it
  - Mixed values displayed for direction (SelectInput), gap (NumberInput), padding (NumberInput), alignment grid (no active cell)
  - Tested in browser: single frame AL works, multi-select with AL frames shows section with mixed, multi-select without AL hides section, gap change applies to all AL frames

2026-02-20: absolute-position-in-auto-layout — Added absolutePosition property for children inside auto-layout frames.
  - BaseNode: added absolutePosition?: boolean to types/scene.ts
  - yogaLayout: filter out absolutePosition children from calculateFrameLayout, computeIntrinsicSize, calculateFrameIntrinsicSize
  - instanceUtils: prepareFrameNode includes absolute children alongside layout children
  - dragController: absolutePosition children use free drag instead of auto-layout reorder drag
  - PositionSection: "Absolute position" checkbox shown when node is inside auto-layout parent
  - PropertyEditor: passes parentContext to PositionSection
  - Tested in browser: created AL frame with 3 rects, enabled absolute on Rect 2, verified exclusion from flow, moved freely to (150,100), verified other children reflow, unchecked returns to flow

2026-02-20: pixi-stroke-per-side-zero-width — Fixed per-side stroke width 0 hiding entire stroke section.
  - Root cause: hasStroke in StrokeSection.tsx used truthiness check (0 is falsy) instead of != null for strokeWidthPerSide values
  - Fix: changed to != null checks so 0 is recognized as a valid set value
  - Tested in browser: created rect, added stroke, switched to per-side, set T to 0 (section stays visible), set all sides to 0 (section stays visible), set B to 3 (only bottom stroke renders)

2026-02-20: option-measure-badges-over-size-badge — Render measure badges above size badge while holding Option/Alt.
  - PixiCanvas: pass selectionContainer into createOverlayRenderer so measure labels can render in selection layer
  - OverlayRenderer: measure-labels container now mounts into selectionContainer instead of overlayContainer
  - Keeps measurement lines in overlay layer but guarantees label badges are visually above size labels
  - Tested: npm run build (TypeScript + Vite production build) passes

2026-02-20: pixi-per-side-stroke-position — Fixed incorrect per-side stroke placement in PixiJS (center/inside/outside).
  - Root cause: per-side lines were always shifted inward by strokeWidth/2, so center behaved like inside
  - Fix: compute side anchor on actual shape edge for center, and offset +/- half width only for inside/outside
  - Updated drawPerSideStroke() coordinate math in src/pixi/renderers/fillStrokeHelpers.ts
  - Tested: npm run build passes
