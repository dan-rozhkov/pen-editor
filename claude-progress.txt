=== 2026-01-24 | Инициализация проекта ===

Статус: Проект инициализирован

Выполнено:
- Создан feature_list.json с 17 фичами в 4 фазах
- Создан claude-progress.txt

Следующие шаги:
- Настройка Vite + React + TypeScript + Zustand
- Реализация базового canvas с Konva.js

---

=== 2026-01-24 | Feature 1: Настройка Vite + React + TypeScript + Zustand ===

Статус: PASSED ✓

Выполнено:
- Создан Vite проект с шаблоном react-ts
- Установлены зависимости: react, zustand, konva, react-konva
- TypeScript конфигурация с strict: true
- Dev server запускается на localhost:5173
- E2E тест пройден: страница загружается, React работает (кнопка-счётчик)

Следующие шаги:
- Konva.js canvas с viewport (pan/zoom)

---

=== 2026-01-24 | Feature 2: Konva.js canvas с viewport (pan/zoom) ===

Статус: PASSED ✓

Выполнено:
- Создан Zustand store для viewport state (scale, x, y, isPanning)
- Создан Canvas компонент с Konva Stage и Layer
- Реализован zoom колёсиком мыши с центрированием на курсоре
- Реализован pan зажатием middle mouse button
- Реализован pan зажатием пробела + drag
- Добавлены демо-фигуры (Rect, Circle) для визуализации
- Исправлена проблема с несколькими копиями React (vite.config.ts alias)
- E2E тест пройден: zoom и pan работают корректно

Следующие шаги:
- Scene Graph с примитивами (frame, rect, ellipse, text)

---

=== 2026-01-24 | Feature 3: Scene Graph с примитивами (frame, rect, ellipse, text) ===

Статус: PASSED ✓

Выполнено:
- Созданы TypeScript типы для узлов Scene Graph (src/types/scene.ts)
- Создан Zustand store для управления узлами (src/store/sceneStore.ts)
- Создан RenderNode компонент для рекурсивного рендеринга узлов
- Создан Toolbar компонент с кнопками для создания примитивов
- Обновлён Canvas.tsx для динамического рендеринга из store
- Обновлён App.tsx с layout (Toolbar слева, Canvas справа)
- E2E тест пройден: все 4 примитива создаются и отображаются на canvas

Следующие шаги:
- Selection & Transform (move, resize)

---

=== 2026-01-24 | Feature 4: Selection & Transform (move, resize) ===

Статус: PASSED ✓

Выполнено:
- Создан Zustand store для selection state (src/store/selectionStore.ts)
- Добавлен Konva Transformer компонент для bounding box и resize handles
- Реализован клик на элемент для выделения
- Реализован Shift+клик для множественного выделения
- Реализован drag для перемещения элементов
- Реализован resize через Transformer handles
- Клик на пустое место снимает выделение
- E2E тест пройден: все функции работают корректно

Следующие шаги:
- Layers Panel (иерархия узлов)

---

=== 2026-01-24 | Feature 5: Layers Panel (иерархия узлов) ===

Статус: PASSED ✓

Выполнено:
- Добавлены поля visible и name в BaseNode type (src/types/scene.ts)
- Добавлены методы reorderNode, setVisibility, toggleVisibility в sceneStore
- Создан компонент LayersPanel (src/components/LayersPanel.tsx)
- Реализована панель справа с списком слоёв
- Иконки для каждого типа узла (frame, rect, ellipse, text)
- Клик на слой выделяет его на canvas
- Shift+клик для множественного выделения
- Drag-n-drop для изменения порядка слоёв
- Кнопка visibility (глаз) для скрытия/показа узлов
- Скрытые узлы не рендерятся на canvas (RenderNode проверяет visible)
- E2E тест пройден через Puppeteer: все функции работают

Следующие шаги:
- Properties Panel (редактирование свойств)

---

=== 2026-01-24 | Feature 6: Properties Panel (редактирование свойств) ===

Статус: PASSED ✓

Выполнено:
- Создан компонент PropertyInputs.tsx с переиспользуемыми инпутами (NumberInput, ColorInput, TextInput)
- Создан компонент PropertiesPanel.tsx с секциями Position, Size, Fill, Stroke, Corner Radius
- Создан компонент RightSidebar.tsx как контейнер для LayersPanel + PropertiesPanel
- Модифицирован LayersPanel.tsx для stacked layout (h-[280px], убран border-l)
- Обновлён App.tsx для использования RightSidebar
- Панель показывает "Select a layer" при отсутствии выделения
- Панель показывает "X layers selected" при множественном выделении
- Для text узлов добавлены секции Text и Font (fontSize, fontFamily)
- Real-time обновления через updateNode() в Zustand store
- E2E тест пройден: позиция, размер, цвета изменяются и отображаются на canvas

Следующие шаги:
- Сохранение/загрузка JSON файлов

---

=== 2026-01-24 | Feature 7: Сохранение/загрузка JSON файлов ===

Статус: PASSED ✓

Выполнено:
- Добавлен метод setNodes в sceneStore для загрузки документов
- Создан src/utils/fileUtils.ts с функциями сериализации/десериализации
- Добавлены кнопки Save и Open в Toolbar
- Формат документа: { version: "1.0", nodes: [...] }
- E2E тест пройден: создание узлов → Save → перезагрузка → Open → узлы восстановлены

Следующие шаги:
- Интеграция yoga-layout (WASM) для auto-layout

---

=== 2026-01-24 | Feature 8: Интеграция yoga-layout (WASM) ===

Статус: PASSED ✓

Выполнено:
- Установлен npm пакет yoga-layout (WASM версия)
- Создан src/utils/yogaLayout.ts с функциями инициализации и расчёта layout
- Создан src/store/layoutStore.ts для управления состоянием yoga
- Добавлены типы LayoutProperties (flexDirection, gap, padding, alignItems, justifyContent)
- Обновлён FrameNode с поддержкой layout properties
- Обновлён App.tsx для инициализации yoga при загрузке
- Обновлён FrameRenderer для расчёта layout когда autoLayout включён
- E2E тест пройден: WASM загружается, Yoga.Node создаётся, layout вычисляется корректно

Следующие шаги:
- Layout properties в UI (direction, gap, padding, align)

---

=== 2026-01-24 | Feature 9: Layout properties в UI ===

Статус: PASSED ✓

Выполнено:
- Добавлен SelectInput компонент в PropertyInputs.tsx (dropdown)
- Добавлен CheckboxInput компонент в PropertyInputs.tsx (toggle)
- Добавлена секция "Auto Layout" в PropertiesPanel.tsx для Frame узлов
- UI для выбора direction (Horizontal/Vertical)
- Input для gap между элементами
- Inputs для padding (T, R, B, L)
- UI для alignItems (Start, Center, End, Stretch)
- UI для justifyContent (Start, Center, End, Space Between)
- E2E тест пройден: все контролы отображаются и изменяют свойства layout

Следующие шаги:
- fill_container / fit_content sizing

---
